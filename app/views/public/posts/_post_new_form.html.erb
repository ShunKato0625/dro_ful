<div class="row px-5 mx-5 my-3 post-new-background">
  <div class="col-12 pt-3">
    <div id="error" class="mb-1"><%= render 'layouts/errors', obj: post %></div>
      <%= form_with model: post do |f| %>
      ã€€<div class="field form-group row">
          <%= f.label :æ’®å½±ç”»åƒ, class: "col-2" %>
          <%= f.file_field :image, accept: "image/*", class:"col-10" %>
        </div>
        <div class="form-group row">
          <%= f.label :æ’®å½±å ´æ‰€, class: "col-2" %>
          <%= f.text_field :title, class:"form-control post_title col-10" %>
        </div>
         <div class="form-group row">
          <%= f.label :éƒ½é“åºœçœŒ, class: "col-2" %>
          <%= f.collection_select(:prefecture_id, Prefecture.all, :id, :name,{include_blank: "---"} ) %>
        </div>
        <div class="form-group row">
          <%= f.label :æ’®å½±æ—¥, class: "col-2" %>
          <%= f.date_field :shooting_date, class:"form-control post_shooting_date col-3" %>
        </div>
        <div class="form-group row">
          <%= f.label :ã‚¢ã‚¯ã‚»ã‚¹, class: "col-2" %>
          <%= f.text_area :access, class:"form-control post_access col-10" %>
        </div>
        <div class="form-group row">
          <%= f.label :æ©Ÿä½“å, class: "col-2" %>
          <%= f.text_field :drone_type, class:"form-control post_drone_type col-10" %>
        </div>

        <div class="form-group row">
          <%= f.label :è¨±å¯å–ã‚Š, class: "col-2" %>
          <%= f.text_area :authorization, class:"form-control post_authorization col-10" %>
        </div>

        <div class="form-group row">
          <%= f.label :ç”³è«‹ã®ç¨®é¡, class: "col-2" %>
          <div class="col-10">
            <%= f.check_box :request, {multiple: true}, "è©²å½“ãªã—", nil  %>è©²å½“ãªã—
          </div>
          <div class="offset-2 col-10">
            <%= f.check_box :request, {multiple: true}, "ç©ºæ¸¯ãªã©ã®å‘¨è¾ºåœ°åŸŸã®ä¸Šç©º", nil %>ç©ºæ¸¯ãªã©ã®å‘¨è¾ºåœ°åŸŸã®ä¸Šç©º
            <%= f.check_box :request, {multiple: true}, "ç·Šæ€¥ç”¨å‹™ç©ºåŸŸ", nil %>ç·Šæ€¥ç”¨å‹™ç©ºåŸŸ
            <%= f.check_box :request, {multiple: true}, "150mä»¥ä¸Šã§ã®é«˜ã•ã§ã®é£›è¡Œ", nil %>150mä»¥ä¸Šã§ã®é«˜ã•ã§ã®é£›è¡Œ
            <%= f.check_box :request, {multiple: true}, "äººå·¥é›†ä¸­åœ°åŒºã®ä¸Šç©º", nil %>äººå·¥é›†ä¸­åœ°åŒºã®ä¸Šç©º
          </div>
          <div class="offset-2 col-10">
            <%= f.check_box :request, {multiple: true}, "å¤œé–“é£›è¡Œ", nil %>å¤œé–“é£›è¡Œ
            <%= f.check_box :request, {multiple: true}, "ç›®è¦–å¤–é£›è¡Œ", nil %>ç›®è¦–å¤–é£›è¡Œ
            <%= f.check_box :request, {multiple: true}, "äººãƒ»ç‰©ãƒ»è»Šç­‰ã®30mæœªæº€é£›è¡Œ", nil %>äººãƒ»ç‰©ãƒ»è»Šç­‰ã®30mæœªæº€é£›è¡Œ
            <%= f.check_box :request, {multiple: true}, "ã‚¤ãƒ™ãƒ³ãƒˆä¸Šç©ºé£›è¡Œ", nil %>ã‚¤ãƒ™ãƒ³ãƒˆä¸Šç©ºé£›è¡Œ
            <%= f.check_box :request, {multiple: true}, "å±é™ºç‰©è¼¸é€", nil %>å±é™ºç‰©è¼¸é€
            <%= f.check_box :request, {multiple: true}, "ç‰©ä»¶æŠ•ä¸‹", nil %>ç‰©ä»¶æŠ•ä¸‹
          </div>
        </div>

        <% if post.id === nil %>
        <div class="form-group row" id="star">
          <%= f.label :ã‚ªã‚¹ã‚¹ãƒ¡åº¦, class: "col-2" %>
          <%= f.hidden_field :rate, id: :review_star, class:'form-control col-10' %>

          <script>
            $('#star').raty({
              size     : 36,
              starOff:  "<%= asset_path('star-off.png') %>",
              starOn : "<%= asset_path('star-on.png') %>",
              starHalf: "<%= asset_path('star-half.png') %>",
              scoreName: 'post[rate]',
              half: true,
            });
          </script>
          <% else %>
            <%= render "shared/posts/static_rate", post: post %>
          <% end %>
        </div>

        <div class="form-group row">
          <%= f.label :å‚™è€ƒæ¬„ , class:"col-2" %>
          <%= f.text_area :remarks, class:"form-control post_remarks col-10" %>
        </div>

        <div class="form-group row">
          <%= f.submit "æŠ•ç¨¿ã™ã‚‹", class:"btn btn-success" %>
        </div>
      <% end %>
  </div>
</div>

<div class="map-wrap">
  <div id="map" class="map"></div>
</div>

<!-- "YOUR_API_KEY" ã®éƒ¨åˆ†ã«ã€ä½œæˆã—ãŸAPIã‚­ãƒ¼ã‚’è²¼ã‚Šä»˜ã‘ã‚‹ -->
<script src="https://maps.googleapis.com/maps/api/js?key="+<%= ENV["GOOGLE_API_KEY"] %> async defer></script>

<!-- ğŸ‘‡ã“ã®jsãƒ•ã‚¡ã‚¤ãƒ«å†…ã«APIã‚’ä½¿ç”¨ã—ãŸè¨˜è¿°ã‚’æ›¸ãï¼ˆå¾Œè¿°ï¼‰ -->
<script>
  window.initMap = () => {

    let map;

    const area = document.getElementById("map"); // ãƒãƒƒãƒ—ã‚’è¡¨ç¤ºã•ã›ã‚‹HTMLã®ç®±
ã€€ã€€// ãƒãƒƒãƒ—ã®ä¸­å¿ƒä½ç½®(ä¾‹:åŸå®¿é§…)
    const center = {
      lat: 35.667379,
      lng: 139.7054965
    };

    //ãƒãƒƒãƒ—ä½œæˆ
    map = new google.maps.Map(area, {
      center,
      zoom: 17,
    });

    //ãƒãƒ¼ã‚«ãƒ¼ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®šğŸ‘‡è¿½è¨˜
    const markerOption = {
      position: center, // ãƒãƒ¼ã‚«ãƒ¼ã‚’ç«‹ã¦ã‚‹ä½ç½®ã‚’æŒ‡å®š
      map: map, // ãƒãƒ¼ã‚«ãƒ¼ã‚’ç«‹ã¦ã‚‹åœ°å›³ã‚’æŒ‡å®š
    }

    //ãƒãƒ¼ã‚«ãƒ¼ä½œæˆ
    const marker = new google.maps.Marker(markerOption);

  }
</script>